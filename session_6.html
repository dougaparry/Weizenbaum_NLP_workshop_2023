<!DOCTYPE html>
<html lang="en"><head>
<script src="session_6_files/libs/clipboard/clipboard.min.js"></script>
<script src="session_6_files/libs/quarto-html/tabby.min.js"></script>
<script src="session_6_files/libs/quarto-html/popper.min.js"></script>
<script src="session_6_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="session_6_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="session_6_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="session_6_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="session_6_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <title>Session 6: STM and wrap up</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="session_6_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="session_6_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="session_6_files/libs/revealjs/dist/theme/quarto.css">
  <link href="session_6_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="session_6_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="session_6_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="session_6_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Session 6: STM and wrap up</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="debrief-tm-pracs" class="slide level2">
<h2>Debrief TM pracs</h2>
</section>
<section id="structural-topic-modelling" class="slide level2">
<h2>Structural Topic modelling</h2>
<p>The Structural Topic Model is a general framework for topic modeling with document-level covariate information.</p>
<ul>
<li><a href="https://juliasilge.com/blog/evaluating-stm/">Silge blogpost 1</a></li>
<li><a href="https://juliasilge.com/blog/sherlock-holmes-stm/">Silge blogpost 2</a></li>
</ul>
<aside class="notes">
<p>Structural topic modelling is one of the most popular alternatives to LDA in recent years. STM is very similar to LDA, but it employs meta data about documents (such as the name of the author or the date in which the document was produced) to improve the assignment of words to topics.</p>
<p>The metadata covariates can improve inference and qualitative interpretability and are allowed to affect topical prevalence, topical content or both.</p>
<p>Another aspect driving use of structural topic models is the extensive and well-developed R package called stm. This package is not only useful for performing STM, but for validating topic models, determining the appropriate value of k and visualizing or further inrpreting topic models. It even includes a function for pre-proceessing text.</p>
<p>In this wrap up I’m just going to highlight the basics of working with structural topic models, but I’d like to point you to two blog posts by Julia Silge that provide full worked examples using STMs.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-stm-package" class="slide level2">
<h2>The <code>stm</code> package</h2>
<p><img data-src="figs/stm.png"> ::: notes As I noted above, one of the reasons behind the popularity of STMs is the stm package developed by Molly Roberts, Brandon Stewart and Dustin Tingley, which provides functionality to:</p>
<ul>
<li>ingest and manipulate text data</li>
<li>estimate Structural Topic Models</li>
<li>calculate covariate effects on latent topics with uncertainty</li>
<li>estimate a graph of topic correlations</li>
<li>compute model diagnostics and summary measures</li>
<li>create all the plots used in our various papers :::</li>
</ul>
</section>
<section id="getting-some-data-for-the-example" class="slide level2">
<h2>Getting some data for the example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r code-overflow-wrap number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>google_doc_id <span class="ot">&lt;-</span> <span class="st">"1LcX-JnpGB0lU1iDnXnxB6WFqBywUKpew"</span> <span class="co"># google file ID</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>poliblogs<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="fu">sprintf</span>(<span class="st">"https://docs.google.com/uc?id=%s&amp;export=download"</span>, google_doc_id), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">head</span>(poliblogs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X
1 1
2 2
3 3
4 4
5 5
6 6
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          documents
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             After a week of false statements, lies, and dismissive apologies, Pakistani President Pervez Musharraf now says that he is disatisfied with the probe into former Prime Minister Benazir Bhutto's death and is asking Scotland Yard for help:"One should not give a statement that's 100 percent final. That's the flaw that we suffer from," Musharraf said at a news conference, noting that more evidence was emerging about the attack. "We needed more experience, maybe more forensic and technical experience that our people don't have. Therefore I thought Scotland Yard may be more helpful." Musharraf said he also reached out to British investigators for assistance to dispel accusations that Pakistan's military or intelligence services were involved. "We don't mind going to any extent, as nobody is involved from the government or agency side," he said. Speaking a week after Bhutto's assassination in a shooting and suicide bombing, Musharraf denied there had been a security lapse and implied that Bhutto, who was greeting supporters through the sunroof of her armored vehicle at the time of the attack, was partly responsible. "Who is to be blamed for her coming out (of) her vehicle?" he asked, adding that others in the vehicle had not been hurt in the attack.When in doubt, blame the victim.Reports in the immediate aftermath of the bombing said that as far back as November, Bhutto believed Musharraf was deliberately withholding security forces that could have made her safer. Unless he feared Bhutto more than the street riotors, I doubt whether that was really true. More likely, he didn't trust the army to protect her. And when she requested that Musharraf allow her to use western private security firms, he refused.I don't think Musharraf wanted Bhutto dead. But I think he is just too weak and indecisive to have done what was needed to protect her.
2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       I honestly don't know how either party's caucus results will play out tonight. Usually, you can get a good idea of&nbsp;perhaps not a winner but at least you can figure out who's up, who's down, and who's on life support.Not with the Iowa Caucuses. Races in both parties are just too close to call. So many variables. So much&nbsp;volatility among the voters. And the polls are whacky.As an example, here are the final two polls out on Iowa. First, ARG:Mike Huckabee 29% (23%) Mitt Romney 24% (32%) Fred Thompson 13% (7%) John McCain 11% (11%) Rudy Giuliani 8% (6%) Ron Paul 6% (6%) Duncan Hunter 4% (2%) Undecided 4% (11%) (Number in parentheses is from ARG survey taken&nbsp;last week)The spread between Huckabee and Romney is the margin of error which means they are virtually tied. Note Thompson's huge bump. Is he surging? Many think so although he probably doesn't have enough juice to catch either front runner for second place. But a strong third sends him along the campaign trail - despite what you might have heard about him dropping out.&nbsp;(Fred and his staff are denying the filthy rumor every chance they get.)Meanwhile, Zogby's daily tracking poll (three day rolling average) tells a little different story:* Huckabee - 31%* Romney - 25%* Thompson - 11%*McCain -10%Here the Huckster opens up a slight lead on Romney with Thompson and McCain far back in the pack.On the Democratic side, Obama has sprinted into the lead:Democrat Barack Obama continued his upward momentum through the evening before the Iowa caucuses, capturing the lead ahead of rivals John Edwards and Hillary Clinton.. Meanwhile, Republican Mike Hucakbee widened his lead over Mitt Romney down the stretch, the newest and last Reuters/C–SPAN/Zogby daily telephone tracking poll in Iowa shows. Obama broke through the 30% barrier for the first time, gaining 31% support after another strong day leading up to the caucuses. But more dramatic was Clinton’s four-point drop in this last day of tracking. Edwards moved into second place by himself after another day where he steadily gained ground. This fifth and final daily tracking poll was conducted using live telephone operators in the Zogby call center in Upstate New York. Edwards finished this Zogby daily tracking in Iowa in the same place as four years ago, when Zogby correctly identified the finishing order of the candidates in that caucus.Hillary Clinton has been playing down her chances the last 48 hours and could very well finish 3rd.All of this matters little in the end. The process of caucusing is complicated for the Democrats and it is possible for any of the top three candidates to win or come in third.We'll see by midnight tonight central time.
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                While we stand in awe of the willingness of our troops in Iraq to sacrifice themselves for the Nation, the fewer that are required to do so, the better.&nbsp; And the news on that front is good.&nbsp; As can be seen in the chart below, our military deaths in December&nbsp;dropped to 23 from 37 in November.&nbsp; December deaths are down over 80% (82%) from May's peak this year of 126.&nbsp; Assuming this reflects a permanent change in the correlation of forces in Iraq - and it is likely that it does, although we cannot be certain of it - it reflects a tremendous achievement on the part of General Petraeus, since this is the result not of retreating from our objectives in Iraq but of advancing toward them - of executing the mission.What of Iraqi deaths?&nbsp; Iraqi security forces and civilian fatalities are also down in December from November.&nbsp;Iraqi deaths are down only by a small amount - from 560 in November to 534 in December, although that difference is not small if you are one of the ones who are now still alive.&nbsp; And the decline from this year's peak in February of 3,014 is a drop of 82%(!).Are we out of the woods in Iraq?&nbsp; It would seem not.&nbsp; We have General Odierno's estremely disturbing cri de coeur&nbsp; at the end of November, which we can assume was endorsed by his chief, General Petraeus.&nbsp; So far as we know, General Odierno's point "A window of opportunity has opened for the government to reach out to its former foes, said Army Lt. Gen. Raymond T. Odierno, the commander of day-to-day U.S. military operations in Iraq, but ‘it's unclear how long that window is going to be open.'"has not been resolved.&nbsp; While some economic indicators, such as the Iraq Stock Exchange and the value of the Iraqi dinar, are showing real strength, the status of the estimated 4 million internal and external refugees remains open, as does the high unemployment rate, estimated at over 40%.&nbsp; But the fatalities figures are good news on the war-fighting front and we don't want to miss them.&nbsp; Success doesn't always announce itself.&nbsp;&nbsp; It's important not to miss it when it is achieved.
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      These pages recently said goodbye to global warming.&nbsp;&nbsp;Ironically, the current spell of global warming, such as it is, can be expected to end just as the Kyoto treaty ends in 2012, but having nothing to do with reduced emissions from fossil fuels.&nbsp; For the remainder of this century, it will be global cooling we'll have to worry about, according to highly credentialed Russian scientist, Dr. Oleg Sorokhtin.Dr. Sorokhtin, Merited Scientist of Russia and fellow of the Russian Academy of Natural Sciences, is staff researcher of the Oceanology Institute.&nbsp; He explains the recent warming as a natural trend."Earth is now at the peak of one of its passing warm spells. It started in the 17th century when there was no industrial influence on the climate to speak of and no such thing as the hothouse effect. The current warming is evidently a natural process and utterly independent of hothouse gases."So what will happen in the future?"Astrophysics knows two solar activity cycles, of 11 and 200 years. Both are caused by changes in the radius and area of the irradiating solar surface. The latest data, obtained by Habibullah Abdusamatov, head of the Pulkovo Observatory space research laboratory, say that Earth has passed the peak of its warmer period, and a fairly cold spell will set in quite soon, by 2012. Real cold will come when solar activity reaches its minimum, by 2041, and will last for 50-60 years or even longer."Physical and mathematical calculations predict a new Ice Age. It will come in 100,000 years, at the earliest, and will be much worse than the previous. Europe will be ice-bound, with glaciers reaching south of Moscow."The high standing of Dr. Sorkhtin and the inherent plausibility of his argument that climate will continue to follow the same basic causal factor, solar activity, make this another heavy blow to the heavy breathing of the global warming alarmists, who insist there is no argument at all.
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             A US report shows how the enemy controlled the information on the battlefield in Fallujah and used this to force the US and Iraqi forces out, in the first battle there. The Belmont&nbsp;Club points out UPI coverage of the report by Shaun Waterman. Here is how the enemy worked: First they kidnapped reporters from major Western news sources, driving them out of the city, and leaving&nbsp;only Al Jazeera, Al Arabiya&nbsp;and local stringers controlled by the enemy as the sole&nbsp;sources of news.&nbsp;When the US returned with many embedded journalists and cut the enemy's information monopoly we won.These figures demonstrate how the insurgency purposely drove the press from the field to recreate the information monopoly they found so advantageous in the opening days of the First Fallujah, when only journalists from Al Jazeera and Al Arabiya were reporting from the scene. The kidnapping campaign compelled news outlets to rely on stringers who could then be controlled by the insurgency and who could be counted on to miraculously stumble on photo opportunities showing insurgents in action, such as the Pulitzer Prize winning photograph of an Iraqi election worker being killed on Haifa Street. The effective riposte again turned out to be finding ways to break the reportorial stranglehold the enemy had established. The information blockade runners turned out to be bloggers and journalists embedded in the military, of whom Michael Yon is perhaps the most famous. The Iraqi bloggers were protected by their anonymity and the embedded journalists were protected by coalition troops. These reporters outflanked the wall of "access journalism" which was gradually restricting the majors and created alternative sources of reportage. Although few in number these blockade runners played a pivotal role in penetrating the "bodyguard of lies" with which al-Qaeda and the Sunni insurgency had surrounded itself.
6 Mike Huckabee is pretty slick. He's the one Republican who's been boosted by the big media. Those media headlines got him off to a fast start. But a couple of days ago&nbsp;he got the press laughing at his shenanigans with his "I'm NOT negative!" press conference. "Mike Huckabee said Monday he wouldn't run a TV ad he'd prepared blistering Republican rival Mitt Romney as dishonest. Then he showed it to a room packed with reporters and cameramen."&nbsp; So Huckabee is talking to a giant media fest with dozens of TV cameras, surrounded by five anti-Mitt posters.&nbsp; But he's very come-to-Jesus about it. You see, he's not actually going to run that negative ad on Mitt, because he's a good person. And just to show the press that he had the negative ad all ready to run, he'll tell them all the Mitt criticisms he's not going to put on TV. "We have run it positive. We have gotten here by being positive."&nbsp;&nbsp; Even the reporters laughed it up.&nbsp; So Huckabee tried to get his negative ad out for free, and still got to claim that he was being positive. Is that slick or what? It's like the guy whose wife tells him he sounds angry, and he screams at her, "I'm NOT MAD!!" A lot of people like Huckabee in person, but he looks like a basically angry man to me. At his pheasant hunting press show he ended up shooting his 20-gauge shotgun over the heads of the onlookers. That's just lousy firearms safety, as any hunter knows.&nbsp; But Huck wasn't sorry. He said it was his way of telling Mitt Romney just "don't get in my way." The press asked him if he really meant to say that, and he just said it again. He did mean it. You just don't do that in a presidential primary. This isn't High Noon in Dodge City. Blasting your shotgun over the heads of the press looks like an impulsive action, by a man who allows his anger to take over his judgment. This is the same guy who's written a book called, "Kids who kill: Confronting Our Culture of Violence."&nbsp;&nbsp;But he didn't set a good example by shooting off his shotgun over people's heads. Huck's not a conservative but a populist politician, like Bill Clinton and Jimmy Carter.&nbsp; "I'm out to change the Republican Party" is his way of saying it. But then he calls himself a&nbsp; conservative.&nbsp; Huckabee isn't good on foreign policy, so he makes really basic mistakes. His advisors just say "he wasn't briefed" on things like Pakistan and the assassination of Bhutto. The trouble is that a president can't just brush up on this dangerous world when some headline story comes up. He's got to be ahead of the curve. A US president should know that Pakistan has been at the center of the war on terror since before 9/11/01, when&nbsp; the Taliban&nbsp; sheltered Osama Bin Laden. Pakistan's intelligence service set up the Taliban in the first place. Today it looks like the same AQ-Taliban goons killed Benazir Bhutto.&nbsp; This can't be news to a presidential candidate. And that's only Pakistan: What about Russia, China, the Middle East? It's just not good enough. America can't settle for a politician who's not up to speed, and who violates firearms safety rules to send a political message. We can't afford a politician who plays the liberal media against the conservative base. Let's leave the slicksters to the Democrats. We have better candidates. James Lewis blogs at dangeroustimes.wordpress.com/
           docname       rating day blog
1 at0800300_1.text Conservative   3   at
2 at0800300_2.text Conservative   3   at
3 at0800300_3.text Conservative   3   at
4 at0800300_4.text Conservative   3   at
5 at0800300_5.text Conservative   3   at
6 at0800300_6.text Conservative   3   at</code></pre>
</div>
</div>
<aside class="notes">
<p>To introduce STMs I’m going to use an example described in the STM package documentation. In this example we have a csv file that contains over 13 000 posts published on six different political blogs since 2008. This code here simply the csv file.</p>
<p>Explain df content</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="processing-the-text" class="slide level2">
<h2>Processing the text</h2>
<ul>
<li>removes punctuation, stop words, numbers, and stems each word</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">library</span>(stm)</span>
<span id="cb3-2"><a href="#cb3-2"></a>processed <span class="ot">&lt;-</span> <span class="fu">textProcessor</span>(poliblogs<span class="sc">$</span>documents, <span class="at">metadata =</span> poliblogs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Building corpus... 
Converting to Lower Case... 
Removing punctuation... 
Removing stopwords... 
Removing numbers... 
Stemming... 
Creating Output... </code></pre>
</div>
</div>
<aside class="notes">
<p>The first thing we need to do is preprocess the text. The textProcessor function automatically removes a) punctuation; b) stop words; c) numbers, and d) stems each word. The function requires us to specify the part of the dataframe where the documents we want to analyze are (here the data are in the documents column), and it also requires us to name the dataset where the rest of the meta data live (poliblogs).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="creating-the-datasets-for-our-stms" class="slide level2">
<h2>Creating the datasets for our STMs</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>out <span class="ot">&lt;-</span> <span class="fu">prepDocuments</span>(processed<span class="sc">$</span>documents, processed<span class="sc">$</span>vocab, processed<span class="sc">$</span>meta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 83198 of 123990 terms (83198 of 2298953 tokens) due to frequency 
Your corpus now has 13246 documents, 40792 terms and 2215755 tokens.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>docs <span class="ot">&lt;-</span> out<span class="sc">$</span>documents</span>
<span id="cb7-2"><a href="#cb7-2"></a>vocab <span class="ot">&lt;-</span> out<span class="sc">$</span>vocab</span>
<span id="cb7-3"><a href="#cb7-3"></a>meta <span class="ot">&lt;-</span>out<span class="sc">$</span>meta</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>There are different ways of working with STMs and if you follow the Silge blogs that I mentioned you’ll see that she uses a different workflow, but for this session I’m folloing the recommended workflow from the stm package.</p>
<p>The stm package requires us to store the documents, meta data, and “vocab”—or total list of words described in the documents—in separate objects.</p>
<p>Before we run our first model, we have to make another decision about the number of topics we might expect to find in the corpus. Let’s start out with 10 for now. In this session I won’t cover how to assess various values for k but in the blog posts linked on the slides Julia Silge provides code to test different values for k.</p>
<p>Because we have metadata, we also need to specify how we want to use the meta data in our model. In essence, we can use the model specification syntax that you’re probably familiar with to specify a formula for how the covariates effect the prevalence of the topics.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="specifying-a-stm" class="slide level2">
<h2>Specifying a STM</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>test_STM <span class="ot">&lt;-</span> <span class="fu">stm</span>(<span class="at">documents =</span> out<span class="sc">$</span>documents, <span class="at">vocab =</span> out<span class="sc">$</span>vocab,</span>
<span id="cb8-2"><a href="#cb8-2"></a>              <span class="at">K =</span> <span class="dv">10</span>, </span>
<span id="cb8-3"><a href="#cb8-3"></a>              <span class="at">prevalence =</span><span class="sc">~</span> rating <span class="sc">+</span> <span class="fu">s</span>(day) ,</span>
<span id="cb8-4"><a href="#cb8-4"></a>              <span class="at">max.em.its =</span> <span class="dv">75</span>, </span>
<span id="cb8-5"><a href="#cb8-5"></a>              <span class="at">data =</span> out<span class="sc">$</span>meta,</span>
<span id="cb8-6"><a href="#cb8-6"></a>              <span class="at">init.type =</span> <span class="st">"Spectral"</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>Here we are specifying a model with 10 topics using both the “rating” variable (that describes whether the blog is liberal or conservative) as well as the day variable to improve topic classification.</p>
<p>For day, we are telling it to calculate a smoothed function (a b-spline) across the variable, appropriate for a variable like day that takes on continuous or many values.</p>
<p>The initialisation type argument helps the analysis to overcome limitations that occur because the starting values of the parameters (e.g., the distribution over words for a particular topic) impact the outputs of the estimation procedures.</p>
<p>Depending on your data, this can take a long time to run. Here this is relatively quick because its a small dataset but with large datasets this can become quite a length process.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="what-does-the-model-look-like" class="slide level2">
<h2>What does the model look like</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co">#td_beta &lt;- tidy(test_STM)</span></span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">plot</span>(test_STM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="session_6_files/figure-revealjs/unnamed-chunk-5-1.png" width="960" class="r-stretch"><aside class="notes">
<p>As with LDA and CTM we can identify the terms most associated with a given topic, here by default it shows the top 3 words (that have been lemmatized). If you want to process this data and incorporate the model output into an analysis piepline you can always use the tidy function from the brook package to create a dataframe of the model output as we did with LDA and CTM. But for now I’m going to stick within the stm package environment to show you an alternative workflow</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">labelTopics</span>(test_STM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Topic 1 Top Words:
     Highest Prob: democrat, republican, senat, vote, bill, hous, legisl 
     FREX: aye, pelosi, chambliss, hagan, bachmann, boehner, merkley 
     Lift: add-on, aderholt, altmir, anti-bailout, anti-incumb, atheist-bait, aye 
     Score: aye, republican, gop, vote, dem, democrat, rep 
Topic 2 Top Words:
     Highest Prob: school, citi, report, chicago, group, ayer, year 
     FREX: usmc, berkeley, dohrn, annenberg, campus, student, cpl 
     Lift: “unwelcom, academy”, anarchist, bergreen, berkeley’, canney, capitelli 
     Score: usmc, ayer, chicago, polic, school, student, cpl 
Topic 3 Top Words:
     Highest Prob: obama, campaign, will, democrat, clinton, hillari, barack 
     FREX: superdeleg, hillari, clinton, deleg, primari, super-deleg, obama 
     Lift: “expanded”, bredesen, callupd, cfi, clintonsâ, data’, elleithe 
     Score: obama, hillari, mccain, clinton, poll, voter, campaign 
Topic 4 Top Words:
     Highest Prob: iran, will, israel, terrorist, world, attack, nuclear 
     FREX: hama, ossetia, gaza, hezballah, iaea, russian, ahmadinejad 
     Lift: -negoti, “caution, “engagement”, “provocation”, “stink, ablaz, aksa 
     Score: iran, israel, iranian, hama, isra, nuclear, russia 
Topic 5 Top Words:
     Highest Prob: will, tax, american, year, govern, econom, can 
     FREX: mortgag, fanni, lender, market, invest, billion, mae 
     Lift: -encompass, -stock, -teach, “earth, “pie”, agribusi, alberta 
     Score: tax, mortgag, oil, billion, economi, bailout, energi 
Topic 6 Top Words:
     Highest Prob: like, one, think, just, peopl, know, get 
     FREX: ustream, live-chat, log-, darwin, bookshelf, femin, handychristma 
     Lift: applecart, siff, --middl, ‘cool, ‘n’, “angri, “breathtaking” 
     Score: wright, film, media, wright’, think, dont, linktocommentspostcount 
Topic 7 Top Words:
     Highest Prob: iraq, war, militari, iraqi, troop, will, american 
     FREX: maliki, sadr, basra, al-maliki, petraeus, iraqi, al-sadr 
     Lift: anbar, -iraqi, -rapid, -strong, -troop, -watch, ‘aspir 
     Score: iraq, iraqi, troop, maliki, afghanistan, sadr, taliban 
Topic 8 Top Words:
     Highest Prob: will, court, right, law, state, peopl, vote 
     FREX: qur’, sura, mugab, tsvangirai, mdc, muhammad, muhammad’ 
     Lift: ---vote, --vote, -fault, -judg, -next, -suddi, -then 
     Score: qur’, mugab, franken, sura, court, ballot, muhammad 
Topic 9 Top Words:
     Highest Prob: mccain, palin, john, campaign, said, say, mccain’ 
     FREX: holtz-eakin, fiorina, palin, plumber, mccain’, scriptalreadyrequest, palin’ 
     Lift: ‘bridg, “deference”, “ok, “readi, kvaal, rates”, scriptalreadyrequest 
     Score: mccain, palin, mccain’, sarah, romney, biden, r-az 
Topic 10 Top Words:
     Highest Prob: bush, report, presid, said, administr, hous, white 
     FREX: blagojevich, mcclellan, thinkfast, fitzgerald, mcclellan’, gonzal, blago 
     Lift: ‘special, “alleg, “amount, “appreciation”, “attorney, “benedict”, “disgruntled” 
     Score: blagojevich, attorney, perino, cia, mcclellan, bush, investig </code></pre>
</div>
</div>
<aside class="notes">
<p>We can get a detailed overview of key terms for every topic using the labelTopics function This function provides the top words according to four different statistics, “highest probability” which is equivalent to beta, FREX, Lift, and Score. FREX is often the most useful here. FREX attempts to find words which are both frequent in and exclusive to a topic of interest. Balancing these two traits is important as frequent words are often by themselves simply functional words necessary to discuss any topic. While completely exclusive words can be so rare as to not be informative. This aligns with what I spoke about earlier with the TF-IDF metric.</p>
<p>We can use these words to support us in developing meaningful labels for the topics</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="inspect-the-output" class="slide level2">
<h2>Inspect the output</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">findThoughts</span>(test_STM, <span class="at">texts =</span> poliblogs<span class="sc">$</span>documents,</span>
<span id="cb12-2"><a href="#cb12-2"></a>     <span class="at">n =</span> <span class="dv">2</span>, <span class="at">topics =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Topic 3: 
     So what will happen tomorrow in the Indiana and North Carolina primaries?  If you look at the totality of all the polls thus far, they suggest that in terms of both the pledged del count and popular vote, an Obama win in North Carolina will be nearly canceled out by a corresponding Hillary victory in Indiana -- meaning the whole night could end up being more or less a wash.  This isn't to say that Obama won't come out on top. If the current average of polls holds up, he'll likely net gains in both the pledged del and popular vote count, thanks to North Carolina's greater overall population. But if you project out the size of the victories based on current polls, it looks as if his net gains in both categories could be negligible.  The polls have shown Hillary's overall lead in Indiana to be in the mid-single digits. But some polls suggest that late deciders will break her way, and precedent suggests the same, given that this happened in both Ohio and Pennsylvania. So let's assume a 55%-45% win for Hillary in Indiana.  Meanwhile, Obama leads in North Carolina by almost ten, so let's assume Obama will win that state by a similar margin of 10 points.  If that happens, our calculations suggest that Obama will walk away with a slight edge for the night of roughly 95 pledged delegates to Hillary's 92. That's because Indiana has 72 delegates, which would roughly break down to 40 for Hillary and 32 for Obama. And North Carolina has 115 delegates, which would roughly break down to 63 for Obama and 52 for Hillary.  What about the popular vote? Going by Chuck Todd's projections for the total popular votes in these two states, Obama -- assuming a roughly 10-point margin in both states -- would gain a net popular vote victory for the night of about 60,000 votes.  In short, the night could end with little change in the delegate or popular vote margins between the two Dems. This would allow Hillary to argue that the contest should continue, and enable her to keep sowing doubts with the super-dels by asking why he can't "close the deal."   But this would also bring Obama that much closer to the nomination by making it that much harder for Hillary to ever reach 2,025 delegates -- while bringing himself closer to that magic number.  The latest polls, along with a poll-of-polls bottom line, after the jump.           IndianaPollster.com Average: Clinton 49.5%, Obama 43.3%SurveyUSA: Clinton 54%, Obama 42%ARG: Clinton 53%, Obama 45%Suffolk: Clinton 49%, Obama 43%Zogby: Obama 44%, Clinton 42%InsiderAdvantage: Clinton 47%, Obama 40%North CarolinaPollster.com Average: Obama 50.1%, Clinton 41.5%InsiderAdvantage: Obama 48%, Clinton 45%PPP (D): Obama 53%, Clinton 43%ARG: Obama 50%, Clinton 42%Zogby: Obama 48%, Clinton 40%Rasmussen: Obama 49%, Clinton 40%
    A surge by&nbsp;Barack Obama has allowed him to leap&nbsp;&nbsp;ahead or pull&nbsp;even in several states he trailed badly in last week which means that it is likely neither he or Hillary Clinton will come out of Super Tuesday with a large lead in delegates.According to published polls and analysts in the know, Obama has an edge in Idaho, Colorado, Minnesota, Kansas, Alabama, Georgia, North Dakota and Illinois while Hillary Clinton is ahead in New York, New Jersey, Tennessee, New Mexico, Oklahoma and Arkansas.Up for grabs are&nbsp; California, Connecticut, Democrats Abroad, Arizona, Missouri, Delaware, Utah, American Samoa, Alaska, Massachusetts. Of those states, Hillary is ahead in Massachusetts with Obama closing while Obama has surged ahead in California but not by much. Clinton is also ahead in Connecticut and Missouri but by less than&nbsp;5 points.Obama has been surging in the national polls as well, drawing within the margin of era in most of the daily tracking polls. This could mean that a few of those toss up states may end up going to Obama.As far as delegate totals, most anaylsts expect only a 50-75 delegate edge to either candidate come Wednesday morning. And this could mean - probably means - that the Democratic race will be decided by Superdelegates; those 750&nbsp;elected officials who will be attending the convention and can pledge any candidate regardless of how their home state voted.Chris Bowers, a savvy Democratic strategists lays out the scenario:[Q]uick math shows that after Super Tuesday, only 1,428 pledged delegates will still be available. Now, here is where the problem shows up. According to current polling averages, the largest possible victory for either candidate on Super Tuesday will be Clinton 889 pledged delegates, to 799 pledged delegates for Obama. (In all likelihood, the winning margin will be lower than this, but using these numbers helps emphasize the seriousness of the situation.) As such, the largest possible pledged delegate margin Clinton can have after Super Tuesday is 937 to 862. (While it is possible Obama will lead in pledged delegates after Super Tuesday, it does not currently seem possible for Obama to have a larger lead than 75). That leaves Clinton 1,088 pledged delegates from clinching the nomination, with only 1,428 pledged delegates remaining. Thus, in order to win the nomination without the aid of super delegates, in her best-case scenario after Super Tuesday, Clinton would need to win 76.2% of all remaining pledged delegates. Given our proportional delegate system, there is simply no way that is going to happen unless Obama drops out.Clinton already has a large, unofficial lead in Superdelegates with at least 184 pledged to her candidacy already to Obama's 95. As the establishment candidate, Clinton can be expected to scoop up a large percentage of the remaining Supers - unless Obama can prove he would be a stronger candidate against McCain in the general election. In this case, both candidates poll within the margin of error against McCain so no advantage to either can be seen.A likely scenario would be the Clinton machine being able to rack up enough endorsements to put Hillary over the top within a couple of weeks of the last Democratic primary in June.</code></pre>
</div>
</div>
<aside class="notes">
<p>We can find the top documents associated with a topic with the findThoughts function. This can also support us in developing the topic labels</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="modeling-topics-with-metadata" class="slide level2">
<h2>Modeling topics with metadata:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>test_STM_2 <span class="ot">&lt;-</span> <span class="fu">stm</span>(<span class="at">documents =</span> out<span class="sc">$</span>documents, </span>
<span id="cb14-2"><a href="#cb14-2"></a>                <span class="at">vocab =</span> out<span class="sc">$</span>vocab,</span>
<span id="cb14-3"><a href="#cb14-3"></a>                <span class="at">K =</span> <span class="dv">10</span>, </span>
<span id="cb14-4"><a href="#cb14-4"></a>                <span class="at">prevalence =</span><span class="sc">~</span> rating <span class="sc">+</span> <span class="fu">s</span>(day) ,</span>
<span id="cb14-5"><a href="#cb14-5"></a>                <span class="at">content =</span><span class="sc">~</span> rating,</span>
<span id="cb14-6"><a href="#cb14-6"></a>                <span class="at">max.em.its =</span> <span class="dv">75</span>, </span>
<span id="cb14-7"><a href="#cb14-7"></a>                <span class="at">data =</span> out<span class="sc">$</span>meta,</span>
<span id="cb14-8"><a href="#cb14-8"></a>                <span class="at">init.type =</span> <span class="st">"Spectral"</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-9"><a href="#cb14-9"></a></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="fu">labelTopics</span>(test_STM_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<aside class="notes">
<p>In our example so far I have modeled the prevalence of topics as a function of the rating variable (that describes whether the blog is liberal or conservative) as well as the day variable. In reality, these variables had almost no effect on the model. The STM model does differ considerably if we also model the content of topics as a function of the rating covariates. This makes intuitive sense as rating describes whether the blog is liberal or conservative.</p>
<p>Here, we’re incorporating as much information as we have avalaible to us to try and model the prevalence and content of these topics to attempt to understand what these documents are about.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="modeling-topics-with-metadata-output" class="slide level2 output-location-slide"><h2>Modeling topics with metadata:</h2><div class="cell output-location-slide">
<div class="cell-output cell-output-stdout">
<pre><code>Topic Words:
 Topic 1: bilbray, bailout…, yarmuth, radanovich, minnick, manzullo, hode 
 Topic 2: mace, darryl, respiratori, warwick, thomas’, -campus, bustl 
 Topic 3: ceja, latbloomberg, pledged-deleg, unpledg, obamacan, siena, parkhomenko 
 Topic 4: six-nat, hamas-l, hydrazin, “caution, telhami, saakashvili, archivesth 
 Topic 5: creditworthi, arabl, turbin, mpg, surcharg, agendath, hsas 
 Topic 6: chapman’, johansson, onscreen, earthi, cinematographi, cosmolog, lakoff 
 Topic 7: maliki, sadrist, baghdad, al-maliki, nouri, iraqi, anbar 
 Topic 8: enfranchis, biodefens, ucmj, anti-fraud, detainees’, thielen, biderman 
 Topic 9: anti-lobbyist, barracuda”, palin, “cone, “joke”, romney”, radio” 
 Topic 10: osc, “democrat”, osno, gaspard, sneed, blago, gsa 
 
 Covariate Words:
 Group Conservative: fusion, retread, bookmark, sown, jeremiad, scanner, unison 
 Group Liberal: company”, ddaythi, partybi, ddayjust, ddayim, ddaywhen, “unfortun 
 
 Topic-Covariate Interactions:
 Topic 1, Group Conservative: americaw, mae, etheridg, fanni, cobl, biggert, wamp 
 Topic 1, Group Liberal: gop-held, kissel, nm-, shulman, wulsin, r-wa, merkley 
 
 Topic 2, Group Conservative: crier, wei, moy, lacey, derbeken, rotc, deas 
 Topic 2, Group Liberal: glbt, unchurch, dobson, algier, savage’, christianist, calvo 
 
 Topic 3, Group Conservative: babyupd, sore-los, fallbut, majesty’, collapseobama, ferraro’, “bradley 
 Topic 3, Group Liberal: big-stat, lux, lady-macbethian, abcpost, tire-gaug, fyibi, bash--press 
 
 Topic 4, Group Conservative: urib, long-last, yongbyon, idf, natanz, indyk, falk 
 Topic 4, Group Liberal: milbank’, podhoretz’, lumber, zapatero, feith’, pandem, shipyard 
 
 Topic 5, Group Conservative: marohasi, non-work, mndot, -zero, yearshat, overfish, man-caus 
 Topic 5, Group Liberal: hooveresqu, deala, richistan, ddaypaul, doctrinebi, trickle-, chrystia 
 
 Topic 6, Group Conservative: n-bomb, sambo, jeremiah’, “jesus”, morti, “thrill, video– 
 Topic 6, Group Liberal: swooner, omega, geeki, assholish, thatmatthew, zappa, enigmat 
 
 Topic 7, Group Conservative: tempo, bhutto, zawahiri, roggio, helmand, rawalpindi, musharraf 
 Topic 7, Group Liberal: overemphasi, clcs, al-jaberi, shinseki’, o’hanlon’, qadir, ex-baathist 
 
 Topic 8, Group Conservative: mugab, asad, karsenti, chrc, al-dura, ibn, ioc 
 Topic 8, Group Liberal: graner, mca, waterboard, minutemen, parhat, willett, uighur 
 
 Topic 9, Group Conservative: regenc, hernandez, myrtl, fwiw, huck’, rudy’, fred’ 
 Topic 9, Group Liberal: hemmer, pastor’, var, lips”, hagee’, nowhere’, newshound 
 
 Topic 10, Group Conservative: rezko, goolsbe, galt, rezko’, khqa, jones-kelley’, wgn 
 Topic 10, Group Liberal: sampson, luskin, fratto, habbush, piab, toussi, eousa 
 </code></pre>
</div>
</div></section><section id="visualise-the-relationships" class="slide level2">
<h2>Visualise the relationships</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>predict_topics<span class="ot">&lt;-</span><span class="fu">estimateEffect</span>(<span class="at">formula =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">~</span> rating <span class="sc">+</span> <span class="fu">s</span>(day), <span class="at">stmobj =</span> test_STM, <span class="at">metadata =</span> out<span class="sc">$</span>meta, <span class="at">uncertainty =</span> <span class="st">"Global"</span>)</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="fu">plot</span>(predict_topics, <span class="at">covariate =</span> <span class="st">"rating"</span>, <span class="at">topics =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">9</span>),</span>
<span id="cb16-4"><a href="#cb16-4"></a> <span class="at">model =</span> test_STM, <span class="at">method =</span> <span class="st">"difference"</span>,</span>
<span id="cb16-5"><a href="#cb16-5"></a> <span class="at">cov.value1 =</span> <span class="st">"Liberal"</span>, <span class="at">cov.value2 =</span> <span class="st">"Conservative"</span>,</span>
<span id="cb16-6"><a href="#cb16-6"></a> <span class="at">xlab =</span> <span class="st">"More Conservative ... More Liberal"</span>,</span>
<span id="cb16-7"><a href="#cb16-7"></a> <span class="at">main =</span> <span class="st">"Effect of Liberal vs. Conservative"</span>,</span>
<span id="cb16-8"><a href="#cb16-8"></a> <span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span>.<span class="dv">1</span>, .<span class="dv">1</span>), <span class="at">labeltype =</span> <span class="st">"custom"</span>,</span>
<span id="cb16-9"><a href="#cb16-9"></a> <span class="at">custom.labels =</span> <span class="fu">c</span>(<span class="st">'Topic 3'</span>, <span class="st">'Topic 5'</span>,<span class="st">'Topic 9'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<aside class="notes">
<p>Once we have the model, we can plot the relationships. The code picks three topics and plots them according to their association with the liberal/conservative rating variable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualise-the-relationships-output" class="slide level2 output-location-slide"><h2>Visualise the relationships</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<p><img data-src="session_6_files/figure-revealjs/unnamed-chunk-9-1.png" width="960"></p>
</div>
</div></section><section id="visualise-topics-over-time" class="slide level2">
<h2>Visualise topics over time</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">plot</span>(predict_topics, <span class="st">"day"</span>, <span class="at">method =</span> <span class="st">"continuous"</span>, <span class="at">topics =</span> <span class="dv">3</span>,</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="at">model =</span> z, <span class="at">printlegend =</span> <span class="cn">FALSE</span>, <span class="at">xaxt =</span> <span class="st">"n"</span>, <span class="at">xlab =</span> <span class="st">"Time (2008)"</span>)</span>
<span id="cb17-3"><a href="#cb17-3"></a>monthseq <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="fu">as.Date</span>(<span class="st">"2008-01-01"</span>),</span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="at">to =</span> <span class="fu">as.Date</span>(<span class="st">"2008-12-01"</span>), <span class="at">by =</span> <span class="st">"month"</span>)</span>
<span id="cb17-5"><a href="#cb17-5"></a>monthnames <span class="ot">&lt;-</span> <span class="fu">months</span>(monthseq)</span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="fu">axis</span>(<span class="dv">1</span>,<span class="at">at =</span> <span class="fu">as.numeric</span>(monthseq) <span class="sc">-</span> <span class="fu">min</span>(<span class="fu">as.numeric</span>(monthseq)),</span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="at">labels =</span> monthnames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<aside class="notes">
<p>We can also plot change in the prevalence of topic over time. This code plots change in the prevalence of topic 3.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualise-topics-over-time-output" class="slide level2 output-location-slide"><h2>Visualise topics over time</h2><div class="cell output-location-slide">
<div class="cell-output-display">
<p><img data-src="session_6_files/figure-revealjs/unnamed-chunk-10-1.png" width="960"></p>
</div>
</div></section><section id="where-to-next" class="slide level2">
<h2>Where to next?</h2>
<ul>
<li>Resources
<ul>
<li>https://www.tidytextmining.com/</li>
<li>https://cran.r-project.org/web/packages/stm/vignettes/stmVignette.pdf</li>
</ul></li>
<li>other topics
<ul>
<li>word embeddings</li>
<li>advanced ML with text data</li>
<li>more complex tokenisation</li>
<li>non-English data</li>
</ul></li>
</ul>
<aside class="notes">
<p>Alright, I think that’s where I’m going to wrap up the workshop. We’ve all had a long day. I hope you’ve learned a lot and, as I mentioned earlier, the code is available online and I’ve designed this workshop to a jumping off point to give you enough of a foundation to then go and dig deeper in your own time and work through some more advanced resources on text analysis.</p>
<p>Hopefully this will be useful for your research and give you some ideas for what you can do.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="session_6_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="session_6_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="session_6_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="session_6_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="session_6_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="session_6_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="session_6_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="session_6_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="session_6_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="session_6_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'print',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>